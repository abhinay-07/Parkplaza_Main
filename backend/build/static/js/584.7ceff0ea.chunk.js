"use strict";(self.webpackChunkparkplaza_frontend=self.webpackChunkparkplaza_frontend||[]).push([[584],{4758:(e,t,o)=>{o.d(t,{A:()=>i});let r=null,n=new Set,l=new Set;function i(e){var t;let{libraries:o=[],retry:i=0,timeoutMs:s=15e3,language:a,region:d,nonce:c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const u=!("undefined"===typeof window||!window.GMAPS_DEBUG),m=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];u&&console.log("[gmaps-loader]",...t)},g=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];u&&console.warn("[gmaps-loader]",...t)},p=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];u&&console.error("[gmaps-loader]",...t)};if(null!==(t=window.google)&&void 0!==t&&t.maps)return null!==o&&void 0!==o&&o.length&&o.forEach(e=>{if(!n.has(e)){"places"!==e||!!window.google.maps.places||g("Already loaded without requested library:",e)}}),Promise.resolve(window.google);if((o||[]).forEach(e=>l.add(e)),r)return r;const x=t=>new Promise((o,r)=>{var i;if(null!==(i=window.google)&&void 0!==i&&i.maps)return m("window.google.maps already present"),o(window.google);let u=document.getElementById("gmaps-sdk");u||(u=document.createElement("script"),u.id="gmaps-sdk",c&&(u.nonce=c),u.async=!0,u.defer=!0,document.head.appendChild(u));let x=!1;"undefined"!==typeof window&&(window.gm_authFailure=()=>{x=!0,p("gm_authFailure: API key or referrer not authorized")}),"undefined"!==typeof window&&(window.__gm_cb=()=>{m("google callback fired (__gm_cb)")},window.__gm_cb2=()=>{m("google callback fired (__gm_cb2)")},window.__gm_cb3=()=>{m("google callback fired (__gm_cb3)")}),u.src=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const o=Array.from(l).sort(),r=!("undefined"===typeof window||!window.GMAPS_NO_ASYNC)||t>1,n=!("undefined"===typeof window||!window.GMAPS_USE_CALLBACK)||t>2;return[`https://maps.googleapis.com/maps/api/js?key=${encodeURIComponent(e)}`,"v=weekly",r?null:"loading=async",o.length?`libraries=${encodeURIComponent(o.join(","))}`:null,a?`language=${encodeURIComponent(a)}`:null,d?`region=${encodeURIComponent(d)}`:null,n?`callback=__gm_cb${t>1?t:""}`:null].filter(Boolean).join("&")}(t),m("injecting script",{src:u.src,attempt:t});const f=async()=>{var e;if(null!==(e=window.google)&&void 0!==e&&e.maps)if(x)r(new Error("Google Maps auth failed (gm_authFailure)"));else{try{if(window.google.maps.importLibrary){const e=Array.from(new Set(["maps",...Array.from(l)]));m("importLibrary start",e),await Promise.all(e.map(e=>window.google.maps.importLibrary(e))),m("importLibrary done"),e.forEach(e=>n.add(e))}else l.has("places")&&!window.google.maps.places&&g("places requested but importLibrary unavailable; relying on libraries param")}catch(t){p("importLibrary failed:",(null===t||void 0===t?void 0:t.message)||t)}o(window.google)}else r(new Error("Google Maps loaded but window.google.maps is undefined"))},h=e=>{u.removeEventListener("load",f),u.removeEventListener("error",h),p("script error",e),r(e||new Error("Failed to load Google Maps script"))};u.addEventListener("load",f,{once:!0}),u.addEventListener("error",h,{once:!0});const v=Date.now(),w=Math.max(5e3,s),b=()=>{var e;return x?(p("auth failed during poll"),void r(new Error("Google Maps auth failed"))):null!==(e=window.google)&&void 0!==e&&e.maps?(m("readiness poll: google.maps present"),void f()):Date.now()-v>w?(p("timeout (poll)",t),void r(new Error(`Loading Google Maps timed out (attempt ${t})`))):void setTimeout(b,150)};setTimeout(b,150)}),f=Math.max(1,1+Number(i||0));return r=(async()=>{if("undefined"!==typeof window&&window.GMAPS_USE_OFFICIAL_LOADER)try{var t;m("trying official @googlemaps/js-api-loader");const o=await import("@googlemaps/js-api-loader").catch(e=>{throw e}),n=(null===o||void 0===o?void 0:o.Loader)||(null===o||void 0===o||null===(t=o.default)||void 0===t?void 0:t.Loader)||(null===o||void 0===o?void 0:o.default);if(n){const t=new n({apiKey:e,version:"weekly",libraries:Array.from(l)});await t.importLibrary("maps");for(const e of l)try{await t.importLibrary(e)}catch(r){g("official loader: failed lib",e,(null===r||void 0===r?void 0:r.message)||r)}return m("official loader done"),window.google}}catch(r){p("official loader failed, falling back",(null===r||void 0===r?void 0:r.message)||r)}let o;for(let e=1;e<=f;e+=1)try{if(e>1){const t=Math.min(2e3*e,6e3);g(`retrying (${e}/${f}) in ${t}ms`),await new Promise(e=>setTimeout(e,t))}return await x(e)}catch(r){o=r,p("load attempt failed:",(null===r||void 0===r?void 0:r.message)||r);const e=document.getElementById("gmaps-sdk");if(e&&e.parentNode)try{e.parentNode.removeChild(e)}catch(n){}}throw o||new Error("Failed to load Google Maps")})(),r}},7584:(e,t,o)=>{o.r(t),o.d(t,{default:()=>u});var r=o(9950),n=o(8429),l=o(2569),i=o(4758),s=o(4414);const a=e=>{let{parkingLots:t=[],userLocation:o=null,selectedLotId:n=null,onMarkerClick:l=null,onParkingLotSelect:a=null,height:d="400px",zoom:c=13,showUserLocation:u=!0,recenterOnSelect:m=!1,needPlaces:g=!1,lazy:p=!0,idleDelay:x=0,debug:f=!1,allowFullscreen:h=!0,autoFullscreen:v=!0,autoFallback:w=!0,fallbackDelayMs:b=3e3}=e;const y=(0,r.useRef)(null),j=(0,r.useRef)(null),[k,N]=(0,r.useState)(null),L=(0,r.useRef)(new Map),[M,S]=(0,r.useState)(!0),[E,C]=(0,r.useState)(null),[z,_]=(0,r.useState)(!1),[A,P]=(0,r.useState)(!1),[I,B]=(0,r.useState)(!1),[G,$]=(0,r.useState)(!p),T=(0,r.useRef)(!1),[R,F]=(0,r.useState)(!1),D=(0,r.useRef)({Map:null,Marker:null,InfoWindow:null,Size:null,Point:null,LatLngBounds:null,AdvancedMarkerElement:null,PinElement:null}),[W,V]=(0,r.useState)(0);if((0,r.useEffect)(()=>{if(!p)return;if(!j.current)return;const e=j.current,t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&($(!0),t.disconnect(),f&&console.log("[GoogleMaps] Visible via IntersectionObserver"))})},{rootMargin:"100px"});return t.observe(e),()=>t.disconnect()},[p]),(0,r.useEffect)(()=>{if(!p||G)return;const e=setTimeout(()=>{G||(T.current=!0,$(!0),f&&console.warn("[GoogleMaps] Forcing visibility after timeout fallback"))},4e3);return()=>clearTimeout(e)},[p,G,f]),(0,r.useEffect)(()=>{var e;if(!G)return;let t=!1;f&&"undefined"!==typeof window&&(window.GMAPS_DEBUG=!0,console.log("[GoogleMaps] Debug enabled"));const r="AIzaSyBjZE83cbz9_NMyGZqpajV4kNiuVB-fr0Q";const n=null===(e=y.current)||void 0===e?void 0:e.__mapInstance;return n?(N(n),S(!1),void(f&&console.log("[GoogleMaps] Reusing existing map instance"))):((async()=>{x>0&&await new Promise(e=>setTimeout(e,x));try{f&&console.log("[GoogleMaps] Loading SDK\u2026",{needPlaces:g,idleDelay:x});const d=await(0,i.A)(r,{libraries:g?["places"]:[],retry:2,timeoutMs:8e3});if(t||!y.current)return;let u,m,p,h,v,w,b,j;if(B(!0),d.maps.importLibrary){const[e,t,o]=await Promise.all([d.maps.importLibrary("maps"),d.maps.importLibrary("marker"),d.maps.importLibrary("core")]);u=(null===e||void 0===e?void 0:e.Map)||d.maps.Map,m=(null===e||void 0===e?void 0:e.Marker)||(null===t||void 0===t?void 0:t.Marker)||d.maps.Marker,p=(null===e||void 0===e?void 0:e.InfoWindow)||(null===t||void 0===t?void 0:t.InfoWindow)||d.maps.InfoWindow,h=(null===o||void 0===o?void 0:o.Size)||d.maps.Size,v=(null===o||void 0===o?void 0:o.Point)||d.maps.Point,w=(null===o||void 0===o?void 0:o.LatLngBounds)||(null===e||void 0===e?void 0:e.LatLngBounds)||d.maps.LatLngBounds,b=null===t||void 0===t?void 0:t.AdvancedMarkerElement,j=null===t||void 0===t?void 0:t.PinElement}else{var e,n,l,s;u=d.maps.Map,m=d.maps.Marker,p=d.maps.InfoWindow,h=d.maps.Size,v=d.maps.Point,w=d.maps.LatLngBounds,b=null===(e=d.maps)||void 0===e||null===(n=e.marker)||void 0===n?void 0:n.AdvancedMarkerElement,j=null===(l=d.maps)||void 0===l||null===(s=l.marker)||void 0===s?void 0:s.PinElement}D.current={Map:u,Marker:m,InfoWindow:p,Size:h,Point:v,LatLngBounds:w,AdvancedMarkerElement:b,PinElement:j};const k=o||{lat:28.6139,lng:77.209};if("function"!==typeof D.current.Map)return f&&console.error("[GoogleMaps] Map constructor unavailable, switching to fallback"),C("Google Maps Map constructor unavailable"),P(!0),void S(!1);let L;try{L=new D.current.Map(y.current,{center:k,zoom:c,mapTypeControl:!0,streetViewControl:!0,fullscreenControl:!0,zoomControl:!0,styles:[{featureType:"poi.business",elementType:"labels",stylers:[{visibility:"off"}]}]})}catch(a){return console.error("Error creating Google Map instance:",a),f&&console.error("[GoogleMaps] Map constructor error, switching to fallback"),C("Failed to initialize Google Map"),P(!0),void S(!1)}if(y.current.__mapInstance=L,t)return;N(L),S(!1),f&&console.log("[GoogleMaps] Map initialized")}catch(d){if(t)return;console.error("Error loading Google Maps:",d),C("Failed to load Google Maps"),S(!1),f&&console.error("[GoogleMaps] Init error",d)}})(),()=>{t=!0})},[g,G,x,W]),(0,r.useEffect)(()=>{if(!h||!v)return;if(!j.current)return;const e=j.current,t=()=>{const t=e.getBoundingClientRect();!R&&(t.height<240||t.width<320)&&(F(!0),f&&console.log("[GoogleMaps] Auto fullscreen due to small container",t))};t();const o=new ResizeObserver(()=>t());return o.observe(e),()=>o.disconnect()},[h,v,R,f]),(0,r.useEffect)(()=>{if(!R)return;const e=e=>{"Escape"===e.key&&F(!1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[R]),(0,r.useEffect)(()=>{k&&I&&u&&o&&(k.__userMarker?k.__userMarker.setPosition(o):k.__userMarker=new D.current.Marker({position:o,map:k,title:"Your Location",icon:{url:'data:image/svg+xml;charset=UTF-8,%3csvg width="24" height="24" xmlns="http://www.w3.org/2000/svg"%3e%3ccircle cx="12" cy="12" r="8" fill="%234285F4"/%3e%3ccircle cx="12" cy="12" r="4" fill="white"/%3e%3c/svg%3e',scaledSize:new D.current.Size(24,24),anchor:new D.current.Point(12,12)}}))},[k,I,o,u]),(0,r.useEffect)(()=>{if(!k||!t)return;const e=l||a;for(const[n,l]of L.current.entries())t.find(e=>String(e.id)===String(n))||(l.marker.setMap(null),L.current.delete(n));const o=new(D.current.LatLngBounds||window.google.maps.LatLngBounds);let r=!1;const i=t=>{if("number"!==typeof(null===t||void 0===t?void 0:t.lat)||"number"!==typeof(null===t||void 0===t?void 0:t.lng))return;r=!0;const n=String(t.id),l={lat:t.lat,lng:t.lng};o.extend(l);const i=t.totalSlots?t.availableSlots/t.totalSlots:0;let s="#ef4444";i>.5?s="#22c55e":i>.2&&(s="#eab308");const a="function"===typeof D.current.AdvancedMarkerElement,d={url:`data:image/svg+xml;charset=UTF-8,%3csvg width="32" height="40" xmlns="http://www.w3.org/2000/svg"%3e%3cpath d="M16 0C7.2 0 0 7.2 0 16c0 16 16 24 16 24s16-8 16-24C32 7.2 24.8 0 16 0z" fill="${s}"/%3e%3ccircle cx="16" cy="16" r="6" fill="white"/%3e%3ctext x="16" y="20" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold" fill="${s}"%3eP%3c/text%3e%3c/svg%3e`,scaledSize:new D.current.Size(32,40),anchor:new D.current.Point(16,40)};let c=L.current.get(n);if(c)if(c.isAdvanced)try{c.marker.position=l}catch(g){}else c.marker.setPosition(l),c.marker.setIcon(d);else{var u;let o;if(a){let e=null;if("function"===typeof D.current.PinElement){e=new D.current.PinElement({background:s,glyph:"P",glyphColor:"#fff"}).element}else{const t=document.createElement("div");t.innerHTML=`<img alt="marker" src="${d.url}" width="32" height="40" />`,e=t.firstChild}o=new D.current.AdvancedMarkerElement({position:l,map:k,title:t.name,content:e})}else o=new D.current.Marker({position:l,map:k,title:t.name,icon:d});const r=new D.current.InfoWindow({content:`\n            <div style="padding:12px;max-width:260px;font-family:Arial,sans-serif;">\n              <h3 style="margin:0 0 6px;color:#1f2937;font-size:15px;">${t.name}</h3>\n              <div style="margin:4px 0;color:#6b7280;font-size:13px;">\ud83d\udccd ${t.address||""}</div>\n              <div style="display:flex;justify-content:space-between;margin:6px 0;font-size:12px;">\n                <div style="text-align:center;">\n                  <div style="font-weight:600;color:${s};">${t.availableSlots}/${t.totalSlots}</div>\n                  <div style="color:#6b7280;">Avail</div>\n                </div>\n                <div style="text-align:center;">\n                  <div style="font-weight:600;color:#1f2937;">\u20b9${(null===(u=t.pricePerHour)||void 0===u?void 0:u.day)||"-"} /hr</div>\n                  <div style="color:#6b7280;">Day</div>\n                </div>\n                <div style="text-align:center;">\n                  <div style="font-weight:600;color:#1f2937;">${t.rating||"\u2014"}\u2b50</div>\n                  <div style="color:#6b7280;">Rating</div>\n                </div>\n              </div>\n              <div style="display:flex;gap:6px;">\n                <button onclick="window.viewParkingLotDetails('${n}')" style="background:#3b82f6;color:#fff;border:none;padding:6px 8px;border-radius:6px;font-size:12px;cursor:pointer;flex:1;font-weight:500;">Details</button>\n                <button onclick="window.bookParkingLot('${n}')" style="background:#16a34a;color:#fff;border:none;padding:6px 8px;border-radius:6px;font-size:12px;cursor:pointer;flex:1;font-weight:500;">Book Now</button>\n              </div>\n            </div>`}),i=a?"gmp-click":"click";o.addListener(i,()=>{a?r.open({map:k,anchor:o}):r.open(k,o),e&&e(t),m&&(k.setCenter(l),k.setZoom(16))}),c={marker:o,infoWindow:r,isAdvanced:a},L.current.set(n,c)}},s=[...t];let d=0;const c=()=>{s.slice(d,d+25).forEach(i),d+=25,d<s.length&&(window.requestIdleCallback?window.requestIdleCallback(c,{timeout:100}):requestAnimationFrame(c)),d>=s.length&&!n&&r&&t.length>1&&k.fitBounds(o)};f&&console.log("[GoogleMaps] Creating markers for lots:",(null===t||void 0===t?void 0:t.length)||0),c()},[k,t,l,a,m,n]),(0,r.useEffect)(()=>{if(!k||!n)return;const e=L.current.get(String(n));e&&(e.isAdvanced?e.infoWindow.open({map:k,anchor:e.marker}):e.infoWindow.open(k,e.marker),m&&(k.setCenter(e.marker.getPosition()),k.setZoom(16)))},[k,n,m]),"undefined"===typeof window||window.viewParkingLotDetails||(window.viewParkingLotDetails=e=>{window.location.href=`/parking-lot/${e}`}),"undefined"===typeof window||window.bookParkingLot||(window.bookParkingLot=e=>{const t=`/booking?lotId=${e}`;localStorage.getItem("token")?window.location.href=t:window.location.href=`/auth?from=${encodeURIComponent(t)}`}),(0,r.useEffect)(()=>{if(!G||I)return;const e=setTimeout(()=>{var e;null!==(e=window.google)&&void 0!==e&&e.maps||_(!0)},5e3);return()=>clearTimeout(e)},[G,I]),(0,r.useEffect)(()=>{if(!w)return;if(!G||I||A)return;const e=setTimeout(()=>{var e;null!==(e=window.google)&&void 0!==e&&e.maps||I||(f&&console.warn("[GoogleMaps] Auto fallback: Google Maps not available"),P(!0))},Math.max(1e3,b));return()=>clearTimeout(e)},[w,b,G,I,A,f]),(0,r.useEffect)(()=>{A&&(async()=>{try{if(!document.querySelector("link[data-leaflet]")){const e=document.createElement("link");e.rel="stylesheet",e.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",e.setAttribute("data-leaflet",""),document.head.appendChild(e)}if(window.L||await new Promise((e,t)=>{const o=document.createElement("script");o.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",o.async=!0,o.onload=e,o.onerror=t,document.head.appendChild(o)}),y.current&&!y.current.__leafletMap){const e=o||{lat:28.6139,lng:77.209},r=window.L.map(y.current).setView([e.lat,e.lng],c);window.L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"&copy; OpenStreetMap contributors"}).addTo(r),y.current.__leafletMap=r,t.forEach(e=>{"number"===typeof(null===e||void 0===e?void 0:e.lat)&&"number"===typeof(null===e||void 0===e?void 0:e.lng)&&window.L.marker([e.lat,e.lng]).addTo(r).bindPopup(`<strong>${e.name}</strong><br/>${e.address||""}`)})}}catch(e){console.error("Leaflet fallback failed",e)}})()},[A,t,o,c]),(0,r.useEffect)(()=>{if(!A)return;let e=!1;const t=Date.now(),o=async()=>{var r;if(e)return;const n=null===(r=window.google)||void 0===r?void 0:r.maps;if(n)try{const e=n.importLibrary?await n.importLibrary("maps"):null;if("function"===typeof((null===e||void 0===e?void 0:e.Map)||n.Map)){var l;if(null!==(l=y.current)&&void 0!==l&&l.__leafletMap){try{y.current.__leafletMap.remove()}catch(i){}y.current.__leafletMap=null}return C(null),P(!1),B(!1),S(!0),void V(e=>e+1)}}catch(i){}Date.now()-t<3e4&&setTimeout(o,1e3)};return setTimeout(o,1e3),()=>{e=!0}},[A]),M&&!G)return(0,s.jsxs)("div",{ref:j,style:{height:d,position:"relative",background:"#f3f4f6",borderRadius:"8px"},children:[(0,s.jsx)("div",{ref:y,style:{width:"100%",height:"100%"}}),(0,s.jsx)("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,s.jsx)("span",{style:{fontSize:12,color:"#6b7280"},children:"Map deferred\u2026 scroll into view"})})]});if(M)return(0,s.jsxs)("div",{ref:j,style:{height:d,position:"relative"},children:[(0,s.jsx)("div",{ref:y,style:{width:"100%",height:"100%"}}),(0,s.jsxs)("div",{style:{position:"absolute",inset:0},children:[(0,s.jsx)("div",{style:{position:"absolute",inset:0,background:"#e5e7eb",animation:"pulse 1.5s ease-in-out infinite"}}),(0,s.jsx)("style",{children:"@keyframes pulse {0%,100%{opacity:0.6;}50%{opacity:1;}}"}),(0,s.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",fontSize:12,color:"#374151"},children:"Loading map\u2026"})]})]});if(E&&!A)return(0,s.jsx)("div",{style:{height:d,position:"relative",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",color:"#dc2626",padding:"20px",textAlign:"center"},children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{style:{margin:"0 0 8px 0",fontWeight:"bold"},children:"Error Loading Map"}),(0,s.jsx)("p",{style:{margin:0,fontSize:"14px"},children:E}),(0,s.jsx)("button",{onClick:()=>P(!0),style:{marginTop:12,background:"#2563eb",color:"#fff",border:"none",padding:"6px 12px",borderRadius:6,cursor:"pointer",fontSize:13},children:"Use Fallback Map"}),(0,s.jsx)("pre",{style:{marginTop:8,textAlign:"left",whiteSpace:"pre-wrap",color:"#7f1d1d"},children:JSON.stringify({hasGoogle:!!window.google,script:!!document.getElementById("gmaps-sdk"),keyFromEnv:!0},null,2)})]})});const U=R?{position:"fixed",inset:0,zIndex:9999,width:"100vw",height:"100vh",background:"#fff"}:{height:d,width:"100%",borderRadius:"8px",overflow:"hidden",position:"relative"};return(0,s.jsxs)("div",{ref:j,style:U,children:[(0,s.jsx)("div",{ref:y,style:{width:"100%",height:"100%"}}),h&&(0,s.jsxs)("div",{style:{position:"absolute",top:8,left:8,display:"flex",gap:8,zIndex:10},children:[!R&&(0,s.jsx)("button",{onClick:()=>F(!0),title:"Fullscreen",style:{background:"rgba(0,0,0,0.6)",color:"#fff",border:"none",padding:"6px 10px",borderRadius:6,cursor:"pointer",fontSize:12},children:"Fullscreen"}),R&&(0,s.jsx)("button",{onClick:()=>F(!1),title:"Exit fullscreen (Esc)",style:{background:"rgba(0,0,0,0.6)",color:"#fff",border:"none",padding:"6px 10px",borderRadius:6,cursor:"pointer",fontSize:12},children:"Exit"})]}),A&&(0,s.jsxs)("div",{style:{position:"absolute",bottom:8,right:8,background:"rgba(0,0,0,0.6)",color:"#fff",padding:"6px 10px",borderRadius:6,fontSize:12},children:["Using fallback map",(0,s.jsx)("button",{onClick:()=>{P(!1),V(e=>e+1)},style:{marginLeft:8,background:"#3b82f6",color:"#fff",border:"none",padding:"4px 8px",borderRadius:4,cursor:"pointer"},children:"Try Google"})]}),z&&!I&&!A&&(0,s.jsxs)("div",{style:{position:"absolute",top:8,right:8,background:"rgba(0,0,0,0.65)",color:"#fff",padding:"8px 10px",borderRadius:6,fontSize:12,maxWidth:260},children:[(0,s.jsx)("strong",{style:{display:"block",marginBottom:4},children:"Map Diagnostics"}),!1,(0,s.jsx)("div",{children:"Key present (env)"}),!1,!1,(0,s.jsxs)("div",{style:{marginTop:4},children:["window.google: ",window.google?"defined":"undefined"]}),(0,s.jsxs)("div",{style:{marginTop:4},children:["Script tag: ",document.getElementById("gmaps-sdk")?"found":"not found"]}),(0,s.jsxs)("div",{style:{marginTop:6,display:"flex",gap:6},children:[(0,s.jsx)("button",{onClick:()=>{_(!1),P(!0)},style:{background:"#3b82f6",color:"#fff",border:"none",padding:"4px 8px",borderRadius:4,cursor:"pointer"},children:"Fallback"}),(0,s.jsx)("button",{onClick:()=>{window.location.reload()},style:{background:"#6b7280",color:"#fff",border:"none",padding:"4px 8px",borderRadius:4,cursor:"pointer"},children:"Reload"})]})]})]})};var d=o(732),c=o(6680);const u=()=>{var e,t;const{lotId:o}=(0,n.g)(),i=(0,n.Zp)(),{isAuthenticated:u}=(0,l.d4)(e=>e.auth),[m,g]=(0,r.useState)("overview"),{parkingLot:p,loading:x,error:f}=(0,c.r)(o),{services:h,loading:v}=(0,c.A$)(o);if(x)return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:(0,s.jsx)(d.A,{message:"Loading parking lot details..."})})});if(f||!p)return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[(0,s.jsx)("div",{className:"text-red-600 mb-4",children:(0,s.jsx)("svg",{className:"w-12 h-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-red-800 mb-2",children:"Parking Lot Not Found"}),(0,s.jsx)("p",{className:"text-red-600 mb-4",children:f||"The parking lot you are looking for does not exist."}),(0,s.jsx)("button",{onClick:()=>i("/"),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg",children:"Back to Home"})]})})});const w=p.availableSlots/p.totalSlots,b=w>.5?"text-green-600":w>.2?"text-yellow-600":"text-red-600",y=w>.5?"bg-green-100":w>.2?"bg-yellow-100":"bg-red-100";return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("div",{className:"bg-white border-b",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsx)("div",{className:"aspect-w-16 aspect-h-12 rounded-lg overflow-hidden bg-gray-200",children:(0,s.jsx)("img",{src:p.image||"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800",alt:p.name,className:"w-full h-64 lg:h-full object-cover"})})}),(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:p.name}),(0,s.jsx)("p",{className:"text-lg text-gray-600 mb-3",children:p.address}),(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex items-center text-yellow-400 mr-2",children:[...Array(5)].map((e,t)=>(0,s.jsx)("svg",{className:"w-5 h-5 "+(t<Math.floor(p.rating)?"fill-current":"text-gray-300"),viewBox:"0 0 20 20",children:(0,s.jsx)("path",{d:"M10 15l-5.878 3.09 1.123-6.545L0 6.91l6.564-.954L10 0l3.436 5.956L20 6.91l-5.245 4.635L15.878 18z"})},t))}),(0,s.jsx)("span",{className:"text-lg font-medium text-gray-900",children:p.rating})]}),(0,s.jsxs)("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${y} ${b}`,children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-current mr-2"}),p.availableSlots," / ",p.totalSlots," available"]})]}),(0,s.jsxs)("div",{className:"flex items-center text-gray-600 mb-4",children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("span",{children:p.operatingHours})]})]}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,s.jsx)("div",{className:"text-sm text-blue-600 font-medium",children:"Day Pricing"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-blue-900",children:["\u20b9",p.pricePerHour.day]}),(0,s.jsx)("div",{className:"text-sm text-blue-600",children:"per hour"})]}),(0,s.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4",children:[(0,s.jsx)("div",{className:"text-sm text-purple-600 font-medium",children:"Night Pricing"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-purple-900",children:["\u20b9",p.pricePerHour.night]}),(0,s.jsx)("div",{className:"text-sm text-purple-600",children:"per hour"})]})]})}),(0,s.jsx)("div",{className:"mt-auto",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[(0,s.jsx)("button",{onClick:()=>{const e=`/booking?lotId=${o}`;u?i(e):i("/auth",{state:{from:{pathname:e}}})},disabled:0===p.availableSlots,className:"px-6 py-3 rounded-lg font-medium transition-colors "+(0===p.availableSlots?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"),children:0===p.availableSlots?"Fully Booked":"Book Now"}),(0,s.jsxs)("button",{onClick:()=>{null!==p&&void 0!==p&&p.contact&&(window.location.href=`tel:${p.contact}`)},className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center",children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),"Call"]}),(0,s.jsxs)("button",{onClick:()=>{if(null!==p&&void 0!==p&&p.lat&&null!==p&&void 0!==p&&p.lng){const e=`https://www.google.com/maps/dir/?api=1&destination=${p.lat},${p.lng}`;window.open(e,"_blank")}},className:"bg-gray-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-gray-700 transition-colors flex items-center justify-center",children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),"Directions"]})]})})]})})]})})}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,s.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,s.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",label:"Overview"},{id:"slots",label:"Slot Details"},{id:"services",label:"Services"},{id:"location",label:"Location"}].map(e=>(0,s.jsx)("button",{onClick:()=>g(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm "+(m===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:e.label},e.id))})}),(0,s.jsxs)("div",{children:["overview"===m&&(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Features & Amenities"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-3",children:null===(e=p.features)||void 0===e?void 0:e.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-green-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,s.jsx)("span",{className:"text-gray-700",children:e})]},t))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Contact Information"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-gray-400 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),(0,s.jsx)("span",{className:"text-gray-700",children:p.contact})]}),(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsxs)("svg",{className:"w-5 h-5 text-gray-400 mr-3 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,s.jsx)("span",{className:"text-gray-700",children:p.address})]})]})]})]}),"slots"===m&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Available Slots by Type"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:null===(t=p.slotTypes)||void 0===t?void 0:t.map((e,t)=>(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center mb-4",children:[(0,s.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg mr-3",children:"car"===e.type?(0,s.jsxs)("svg",{className:"w-6 h-6 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:[(0,s.jsx)("path",{d:"M4 16a2 2 0 100-4 2 2 0 000 4zM16 16a2 2 0 100-4 2 2 0 000 4z"}),(0,s.jsx)("path",{fillRule:"evenodd",d:"M3 4a1 1 0 00-1 1v10a1 1 0 102 0V5a1 1 0 001-1h12a1 1 0 001 1v10a1 1 0 102 0V5a1 1 0 00-1-1H3z",clipRule:"evenodd"})]}):(0,s.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"})})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 capitalize",children:[e.type," Parking"]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["\u20b9",e.price,"/hour"]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Total Slots"}),(0,s.jsx)("span",{className:"font-medium",children:e.total})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Available"}),(0,s.jsx)("span",{className:"font-medium "+(e.available>0?"text-green-600":"text-red-600"),children:e.available})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"h-2 rounded-full "+(e.available/e.total>.5?"bg-green-500":e.available/e.total>.2?"bg-yellow-500":"bg-red-500"),style:{width:e.available/e.total*100+"%"}})})]})]},t))})]}),"services"===m&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Available Services"}),v?(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)(d.A,{message:"Loading services..."})}):0===h.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,s.jsx)("h4",{className:"mt-2 text-sm font-medium text-gray-900",children:"No services available"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"This parking lot doesn't offer additional services yet."})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(e=>(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center mb-3",children:[(0,s.jsx)("div",{className:"text-2xl mr-3",children:e.icon}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["\u20b9",e.price," ","per-kwh"===e.priceType?"/kWh":""]})]})]}),(0,s.jsx)("p",{className:"text-gray-600 mb-3",children:e.description}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-500",children:["Duration: ",e.duration,"min"]}),e.popular&&(0,s.jsx)("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:"Popular"})]})]},e.id))})]}),"location"===m&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Location & Directions"}),(0,s.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:(0,s.jsx)("div",{style:{height:"400px"},children:(0,s.jsx)(a,{parkingLots:[p],selectedLotId:p.id,showUserLocation:!1,height:"100%",zoom:16,debug:!0,lazy:!1,idleDelay:0})})}),(0,s.jsx)("div",{className:"mt-4 bg-white rounded-lg border border-gray-200 p-4",children:(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsxs)("svg",{className:"w-5 h-5 text-gray-400 mr-3 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900",children:"Address"}),(0,s.jsx)("p",{className:"text-gray-600",children:p.address})]})]})})]})]})]})]})}}}]);