"use strict";(self.webpackChunkparkplaza_frontend=self.webpackChunkparkplaza_frontend||[]).push([[680],{6680:(a,e,i)=>{i.d(e,{XS:()=>P,_6:()=>m,Wo:()=>h,r:()=>g,Ex:()=>p,A$:()=>y});var t=i(9950),o=i(5788),l=i(7443);const r=[{id:"1",name:"Downtown Plaza Parking",address:"123 Main Street, Downtown",lat:28.6139,lng:77.209,rating:4.5,totalSlots:150,availableSlots:45,pricePerHour:{day:30,night:20},features:["CCTV","24/7 Security","EV Charging","Covered"],operatingHours:"24/7",contact:"+91-9876543210",image:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=500",slotTypes:[{type:"car",available:35,total:100,price:30},{type:"bike",available:10,total:50,price:15}]},{id:"2",name:"Metro Station Parking",address:"456 Station Road, Central Delhi",lat:28.6304,lng:77.2177,rating:4.2,totalSlots:200,availableSlots:80,pricePerHour:{day:25,night:15},features:["Metro Connected","CCTV","Washroom"],operatingHours:"5:00 AM - 12:00 AM",contact:"+91-9876543211",image:"https://images.unsplash.com/photo-1520637836862-4d197d17c90a?w=500",slotTypes:[{type:"car",available:60,total:120,price:25},{type:"bike",available:20,total:80,price:12}]},{id:"3",name:"Shopping Mall Parking",address:"789 Mall Avenue, South Delhi",lat:28.5355,lng:77.391,rating:4.7,totalSlots:300,availableSlots:120,pricePerHour:{day:40,night:25},features:["Shopping Mall","Food Court","EV Charging","Valet Service"],operatingHours:"10:00 AM - 11:00 PM",contact:"+91-9876543212",image:"https://images.unsplash.com/photo-1555636222-cae831e670b3?w=500",slotTypes:[{type:"car",available:100,total:250,price:40},{type:"bike",available:20,total:50,price:20}]},{id:"4",name:"Airport Express Parking",address:"101 Airport Road, Terminal 3",lat:28.5562,lng:77.0999,rating:4.3,totalSlots:400,availableSlots:180,pricePerHour:{day:50,night:35},features:["Airport Shuttle","CCTV","24/7 Security","Covered"],operatingHours:"24/7",contact:"+91-9876543213",image:"https://images.unsplash.com/photo-1436491865332-7a61a109cc05?w=500",slotTypes:[{type:"car",available:150,total:350,price:50},{type:"bike",available:30,total:50,price:25}]},{id:"5",name:"Business District Parking",address:"234 Corporate Avenue, Gurgaon",lat:28.4595,lng:77.0266,rating:4.1,totalSlots:180,availableSlots:55,pricePerHour:{day:35,night:22},features:["Business Center","WiFi","CCTV","Restaurant"],operatingHours:"6:00 AM - 11:00 PM",contact:"+91-9876543214",image:"https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?w=500",slotTypes:[{type:"car",available:45,total:140,price:35},{type:"bike",available:10,total:40,price:18}]}],n=[{id:"cleaning-basic",name:"Basic Car Wash",description:"Exterior wash with soap and water",price:150,duration:30,category:"cleaning",icon:"\ud83d\udebf",popular:!0},{id:"cleaning-premium",name:"Premium Car Wash",description:"Complete interior and exterior cleaning with wax",price:300,duration:60,category:"cleaning",icon:"\u2728",popular:!1},{id:"oil-change",name:"Oil Change Service",description:"Complete engine oil change with filter replacement",price:800,duration:45,category:"mechanical",icon:"\ud83d\udd27",popular:!1},{id:"tire-check",name:"Tire Pressure Check",description:"Check and adjust tire pressure for all wheels",price:100,duration:15,category:"mechanical",icon:"\ud83d\udede",popular:!0},{id:"security-premium",name:"Premium Security Monitoring",description:"24/7 dedicated security monitoring with alerts",price:200,duration:0,category:"security",icon:"\ud83d\udee1\ufe0f",popular:!1,features:["Real-time alerts","HD camera monitoring","Security guard patrol"],availability:"24/7"},{id:"valet-parking",name:"Valet Parking Service",description:"Professional valet will park and retrieve your vehicle",price:500,duration:10,category:"convenience",icon:"\ud83c\udfa9",popular:!0,features:["Professional valet","Vehicle inspection","Key security"],availability:"8 AM - 10 PM"},{id:"fuel-service",name:"Mobile Fuel Service",description:"Fuel delivery service while your vehicle is parked",price:50,duration:15,category:"convenience",icon:"\u26fd",popular:!1,features:["Petrol/Diesel delivery","Fuel quality guarantee","Digital receipt"],availability:"9 AM - 8 PM"},{id:"detailing-premium",name:"Premium Car Detailing",description:"Complete vehicle detailing with paint protection",price:1200,duration:120,category:"cleaning",icon:"\ud83d\udc8e",popular:!1,features:["Paint correction","Interior deep clean","Ceramic coating"],availability:"8 AM - 6 PM"}],s=[{id:"booking-1",lotId:"1",lotName:"Downtown Plaza Parking",address:"123 Main Street, Downtown",startTime:"2025-08-08T10:00:00Z",endTime:"2025-08-08T14:00:00Z",slotType:"car",slotNumber:"A-15",services:["cleaning-basic"],totalAmount:270,status:"active",paymentStatus:"paid",qrCode:"PARKABCD1234",createdAt:"2025-08-07T08:00:00Z"},{id:"booking-2",lotId:"2",lotName:"Metro Station Parking",address:"456 Station Road, Central Delhi",startTime:"2025-08-06T09:00:00Z",endTime:"2025-08-06T18:00:00Z",slotType:"car",slotNumber:"B-23",services:[],totalAmount:225,status:"completed",paymentStatus:"paid",qrCode:"PARKEFGH5678",createdAt:"2025-08-05T20:00:00Z"},{id:"booking-3",lotId:"3",lotName:"Shopping Mall Parking",address:"789 Mall Avenue, South Delhi",startTime:"2025-08-10T15:00:00Z",endTime:"2025-08-10T19:00:00Z",slotType:"car",slotNumber:"C-42",services:["cleaning-premium","oil-change"],totalAmount:1320,status:"upcoming",paymentStatus:"paid",qrCode:"PARKIJKL9012",createdAt:"2025-08-07T12:00:00Z"}],d=[{id:"cleaning",name:"Cleaning Services",icon:"\ud83e\uddfd",description:"Professional car cleaning and detailing"},{id:"mechanical",name:"Mechanical Services",icon:"\ud83d\udd27",description:"Basic vehicle maintenance and repairs"},{id:"security",name:"Security Services",icon:"\ud83d\udee1\ufe0f",description:"Enhanced security and monitoring services"},{id:"convenience",name:"Convenience Services",icon:"\ud83c\udfaf",description:"Time-saving convenience services"}],c={delay:a=>new Promise(e=>setTimeout(e,a)),getNearbyParkingLots:async function(a,e){return await c.delay(800),{data:{success:!0,data:r}}},getParkingLotDetails:async a=>{await c.delay(600);const e=r.find(e=>e.id===a);if(!e)throw new Error("Parking lot not found");return{data:{success:!0,data:e}}},getServicesForLot:async a=>(await c.delay(500),{data:{success:!0,data:n}}),getAllServices:async()=>(await c.delay(500),{data:{success:!0,data:n,categories:d}}),calculateBookingPrice:async function(a,e,i){let t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];await c.delay(400);const o=r.find(e=>e.id===a);if(!o)throw new Error("Parking lot not found");const l=new Date(e),s=new Date(i),d=Math.ceil((s-l)/36e5),u=l.getHours(),v=u<6||u>=22,p=d*(v?o.pricePerHour.night:o.pricePerHour.day),g=t.reduce((a,e)=>{const i=n.find(a=>a.id===e);return a+(i?i.price:0)},0),y=p+g,m=.18*y;return{data:{success:!0,data:{parkingCost:p,servicesCost:g,subtotal:y,tax:m,total:y+m,breakdown:{hours:d,pricePerHour:v?o.pricePerHour.night:o.pricePerHour.day,isNightPricing:v}}}}},createBooking:async a=>{await c.delay(1200);return{data:{success:!0,data:{id:`booking-${Date.now()}`,...a,status:"active",paymentStatus:"paid",createdAt:(new Date).toISOString(),qrCode:`PARK${Math.random().toString(36).substring(2,15).toUpperCase()}`},message:"Booking created successfully"}}},getUserBookings:async()=>(await c.delay(700),{data:{success:!0,data:s}})},u=a=>{var e,i,t,o,l,r,n,s,d;if(!a)return null;let c;const u=null===(e=a.availability)||void 0===e?void 0:e.operatingHours;return null!==u&&void 0!==u&&u.is24Hours?c="24/7":null!==u&&void 0!==u&&u.start&&null!==u&&void 0!==u&&u.end&&(c=`${u.start}-${u.end}`),{id:a._id||a.id,name:a.name,description:a.description||"",category:a.category,price:null!==(i=null!==(t=null!=a.customPricing?a.customPricing:null===(o=a.pricing)||void 0===o?void 0:o.basePrice)&&void 0!==t?t:a.price)&&void 0!==i?i:0,priceType:(null===(l=a.pricing)||void 0===l?void 0:l.unit)||a.priceType||"per-service",duration:(null===(r=a.details)||void 0===r||null===(n=r.duration)||void 0===n?void 0:n.estimated)||a.duration||0,availability:c,features:(null===(s=a.details)||void 0===s?void 0:s.includes)||a.features||[],popular:((null===(d=a.stats)||void 0===d?void 0:d.totalBookings)||0)>25||a.popular||!1,icon:"\ud83d\udee0\ufe0f"}},v="true"==={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://your-api-domain.com/api",REACT_APP_APP_NAME:"ParkPlaza",REACT_APP_ENV:"production",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyBjZE83cbz9_NMyGZqpajV4kNiuVB-fr0Q",REACT_APP_RAZORPAY_KEY_ID:"rzp_live_your_live_key_id",REACT_APP_SOCKET_URL:"https://your-api-domain.com",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_live_your_live_stripe_publishable_key",REACT_APP_VERSION:"1.0.0"}.REACT_APP_USE_MOCK_DATA||!1,p=a=>{const[e,i]=(0,t.useState)([]),[l,r]=(0,t.useState)(!0),[n,s]=(0,t.useState)(null),d=a=>{var e,i,t,o,l,r,n,s,d,c,u,v,p,g,y,m,h,P,S,f,b,A,w,k,C,_,T;return a?"number"===typeof a.lat&&"number"===typeof a.lng?{id:a.id||a._id,name:a.name,address:a.address||(null===(y=a.location)||void 0===y||null===(m=y.address)||void 0===m?void 0:m.city)||"",lat:a.lat,lng:a.lng,availableSlots:null!==(h=null!==(P=a.availableSlots)&&void 0!==P?P:null===(S=a.capacity)||void 0===S?void 0:S.available)&&void 0!==h?h:0,totalSlots:null!==(f=null!==(b=a.totalSlots)&&void 0!==b?b:null===(A=a.capacity)||void 0===A?void 0:A.total)&&void 0!==f?f:0,pricePerHour:a.pricePerHour||{day:null!==(w=null===(k=a.pricing)||void 0===k?void 0:k.hourly)&&void 0!==w?w:0},rating:null!==(C=null!==(_=a.rating)&&void 0!==_?_:null===(T=a.rating)||void 0===T?void 0:T.average)&&void 0!==C?C:0,distanceMeters:a.distanceMeters||a.distance}:{id:a._id,name:a.name,address:(null===(e=a.location)||void 0===e||null===(i=e.address)||void 0===i?void 0:i.city)||"",lat:null===(t=a.location)||void 0===t||null===(o=t.coordinates)||void 0===o?void 0:o[1],lng:null===(l=a.location)||void 0===l||null===(r=l.coordinates)||void 0===r?void 0:r[0],availableSlots:null!==(n=null===(s=a.capacity)||void 0===s?void 0:s.available)&&void 0!==n?n:0,totalSlots:null!==(d=null===(c=a.capacity)||void 0===c?void 0:c.total)&&void 0!==d?d:0,pricePerHour:{day:null!==(u=null===(v=a.pricing)||void 0===v?void 0:v.hourly)&&void 0!==u?u:0},rating:null!==(p=null===(g=a.rating)||void 0===g?void 0:g.average)&&void 0!==p?p:0,distanceMeters:a.distance}:null},u=async(a,e)=>{try{var t;let n;if(r(!0),v)n=await c.getNearbyParkingLots(a,e);else try{n=await o.vJ.getNearby(a,e)}catch(l){console.warn("Backend API failed, falling back to mock data:",l),n=await c.getNearbyParkingLots(a,e)}const u=(null===(t=n.data)||void 0===t?void 0:t.data)||n.data||[],p=Array.isArray(u)?u.map(d).filter(Boolean):[];i(p),s(null)}catch(n){console.error("Failed to fetch parking lots:",n),s("Failed to load parking lots. Please try again.")}finally{r(!1)}};(0,t.useEffect)(()=>{null!==a&&void 0!==a&&a.lat&&null!==a&&void 0!==a&&a.lng&&u(a.lat,a.lng)},[a]),(0,t.useEffect)(()=>{function a(a){const{lotId:e,available:t}=a.detail||{};e&&"number"===typeof t&&i(a=>a.map(a=>(a.id===e||a._id===e)&&a.availableSlots!==t?{...a,availableSlots:t}:a))}return window.addEventListener("parking-availability-update",a),()=>window.removeEventListener("parking-availability-update",a)},[]);return{parkingLots:e,loading:l,error:n,refetch:()=>null!==a&&void 0!==a&&a.lat&&null!==a&&void 0!==a&&a.lng?u(a.lat,a.lng):Promise.resolve()}},g=a=>{const[e,i]=(0,t.useState)(null),[r,n]=(0,t.useState)(!0),[s,d]=(0,t.useState)(null),u=a=>{var e,i,t,o,l,r,n,s,d,c,u,v,p,g,y,m,h,P,S,f,b,A,w,k,C,_,T,E,H,M,D,B,R,L,F,N;if(!a)return null;const I=a.lot||a;if(!I)return null;const O=(null===(e=I.location)||void 0===e?void 0:e.coordinates)||[I.lng,I.lat];let K="";const V=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][(new Date).getDay()],Z=null===(i=I.operatingHours)||void 0===i?void 0:i[V];return Z&&(Z.is24Hours?K="Open 24 hours":Z.open&&Z.close&&(K=`Open today ${Z.open} \u2013 ${Z.close}`)),K||(K="Hours not available"),{id:I._id||I.id,name:I.name,description:I.description,address:(null===(t=I.location)||void 0===t||null===(o=t.address)||void 0===o?void 0:o.street)||I.address||(null===(l=I.location)||void 0===l||null===(r=l.address)||void 0===r?void 0:r.city)||"",city:null===(n=I.location)||void 0===n||null===(s=n.address)||void 0===s?void 0:s.city,state:null===(d=I.location)||void 0===d||null===(c=d.address)||void 0===c?void 0:c.state,country:null===(u=I.location)||void 0===u||null===(v=u.address)||void 0===v?void 0:v.country,lat:null===O||void 0===O?void 0:O[1],lng:null===O||void 0===O?void 0:O[0],availableSlots:null!==(p=null!==(g=null===(y=I.capacity)||void 0===y?void 0:y.available)&&void 0!==g?g:I.availableSlots)&&void 0!==p?p:0,totalSlots:null!==(m=null!==(h=null===(P=I.capacity)||void 0===P?void 0:P.total)&&void 0!==h?h:I.totalSlots)&&void 0!==m?m:0,pricePerHour:{day:null!==(S=null!==(f=null===(b=I.pricing)||void 0===b?void 0:b.hourly)&&void 0!==f?f:null===(A=I.pricePerHour)||void 0===A?void 0:A.day)&&void 0!==S?S:0,night:null!==(w=null!==(k=null!==(C=null===(_=I.pricing)||void 0===_?void 0:_.hourly)&&void 0!==C?C:null===(T=I.pricePerHour)||void 0===T?void 0:T.night)&&void 0!==k?k:null===(E=I.pricing)||void 0===E?void 0:E.hourly)&&void 0!==w?w:0},rating:null!==(H=null!==(M=null===(D=I.rating)||void 0===D?void 0:D.average)&&void 0!==M?M:I.rating)&&void 0!==H?H:0,operatingHours:K,rawOperatingHours:I.operatingHours,amenities:I.amenities||I.features||[],features:I.amenities||I.features||[],slotTypes:I.slotTypes||[],contact:(null===(B=I.owner)||void 0===B?void 0:B.phone)||I.contact,image:(null===(R=I.images)||void 0===R||null===(L=R.find(a=>a.isPrimary))||void 0===L?void 0:L.url)||(null===(F=I.images)||void 0===F||null===(N=F[0])||void 0===N?void 0:N.url),recentActivity:a.recentActivity}};return(0,t.useEffect)(()=>{(async()=>{if(a)try{var e;if(n(!0),(0,l.e)(a))return i(u(l.j[a])),void d(null);const t=v?await c.getParkingLotDetails(a):await o.vJ.getDetails(a),r=(null===(e=t.data)||void 0===e?void 0:e.data)||t.data;i(u(r)),d(null)}catch(t){console.error("Failed to fetch parking lot details:",t),d(t.message),i(null)}finally{n(!1)}})()},[a]),{parkingLot:e,loading:r,error:s}},y=function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const[e,i]=(0,t.useState)([]),[r,n]=(0,t.useState)([]),[s,d]=(0,t.useState)(!0),[p,g]=(0,t.useState)(null),y=u;return(0,t.useEffect)(()=>{let e=!1;return async function(){d(!0),g(null);const t=(a,t,o)=>{e||(i(a),t&&n(t),o&&g(o))};try{var r;if(v||(0,l.e)(a)){var s;const e=a?await c.getServicesForLot(a):await c.getAllServices(),i=(null===(s=e.data)||void 0===s?void 0:s.data)||e.data||[];return void t(Array.isArray(i)?i.map(y).filter(Boolean):[],[...new Set(i.map(a=>a.category))])}const e=(null===(r=(a?await o.dJ.getByLot(a):await o.dJ.getAll()).data)||void 0===r?void 0:r.data)||{},i=e.services||e||[];t(Array.isArray(i)?i.map(y).filter(Boolean):[],e.categories)}catch(p){console.error("Service fetch failed, attempting mock fallback:",(null===p||void 0===p?void 0:p.message)||p);try{var u;const e=a?await c.getServicesForLot(a):await c.getAllServices(),i=(null===(u=e.data)||void 0===u?void 0:u.data)||e.data||[];t(Array.isArray(i)?i.map(y).filter(Boolean):[],[...new Set(i.map(a=>a.category))],"Showing mock services (API unavailable)")}catch(m){t([],null,(null===m||void 0===m?void 0:m.message)||(null===p||void 0===p?void 0:p.message)||"Failed to load services")}}finally{e||d(!1)}}(),()=>{e=!0}},[a]),{services:e,categories:r,loading:s,error:p}},m=()=>{const[a,e]=(0,t.useState)(null),[i,r]=(0,t.useState)(!1),[n,s]=(0,t.useState)(null);return{priceData:a,loading:i,error:n,calculatePrice:async function(a,i,t){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];try{var d;if(r(!0),(0,l.e)(a)){var u,p,g,y;const o=l.j[a];if(!o)throw new Error("Demo lot not found");const r=new Date(i),n=new Date(t),d=Math.max(1,Math.ceil((n-r)/36e5)),c=d*(null!==(u=null===(p=o.pricePerHour)||void 0===p?void 0:p.day)&&void 0!==u?u:0),v=0,m=c+v,h=Math.round(.18*m),P={parkingCost:c,servicesCost:v,subtotal:m,tax:h,total:m+h,breakdown:{hours:d,pricePerHour:null!==(g=null===(y=o.pricePerHour)||void 0===y?void 0:y.day)&&void 0!==g?g:0}};return e(P),s(null),P}if(v){var m;const o=await c.calculateBookingPrice(a,i,t,n),l=(null===(m=o.data)||void 0===m?void 0:m.data)||o.data;return e(l),s(null),l}const h=await o.iC.calculatePrice({parkingLot:a,startTime:i,endTime:t,services:n}),P=(null===(d=h.data)||void 0===d?void 0:d.data)||h.data;return e(P),s(null),P}catch(h){throw console.error("Failed to calculate price:",h),s(h.message),h}finally{r(!1)}},resetPrice:()=>{e(null),s(null)}}},h=function(){let a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const[e,i]=(0,t.useState)([]),[l,r]=(0,t.useState)(!0),[n,s]=(0,t.useState)(null),d=async()=>{if(!localStorage.getItem("token"))return s("Please login to view your bookings"),i([]),void r(!1);try{if(r(!0),s(null),v){const a=await c.getUserBookings();i(a.data.data||a.data||[])}else{var a;const e=await o.iC.myBookings(),t=(null===(a=e.data)||void 0===a?void 0:a.data)||e.data||[];i(Array.isArray(t)?t:[])}}catch(e){console.error("Failed to fetch bookings:",e),s("Failed to load bookings. Please try again."),i([])}finally{r(!1)}};(0,t.useEffect)(()=>{if(!a)return i([]),void r(!1);d()},[a]);return{bookings:e,loading:l,error:n,createBooking:async a=>{try{const e=v?await c.createBooking(a):await o.iC.create(a);return i(a=>[e.data.data,...a]),e.data.data}catch(e){throw console.error("Failed to create booking:",e),e}},refetch:d}},P=()=>{const[a,e]=(0,t.useState)([]),[i,l]=(0,t.useState)(!0),[r,n]=(0,t.useState)(null),s=u;return(0,t.useEffect)(()=>{let a=!1;return async function(){l(!0),n(null);const i=(i,t)=>{a||(e(i),t&&n(t))};try{var t;if(v){const a=await c.getAllServices(),e=a.data.data||a.data||[];return void i(Array.isArray(e)?e.map(s).filter(Boolean):[])}const a=(null===(t=(await o.dJ.getAll()).data)||void 0===t?void 0:t.data)||{},e=a.services||a||[];i(Array.isArray(e)?e.map(s).filter(Boolean):[])}catch(r){if(console.error("All services fetch failed, mock fallback attempt:",(null===r||void 0===r?void 0:r.message)||r),v)i([],r.message||"Failed to load services");else try{const a=await c.getAllServices(),e=a.data.data||a.data||[];i(Array.isArray(e)?e.map(s).filter(Boolean):[],"Showing mock services (API unavailable)")}catch(d){i([],r.message||"Failed to load services")}}finally{a||l(!1)}}(),()=>{a=!0}},[]),{services:a,loading:i,error:r}}},7443:(a,e,i)=>{i.d(e,{e:()=>o,j:()=>t});const t={"demo-central-mall":{id:"demo-central-mall",name:"Demo Central Mall Parking",address:"Connaught Place, New Delhi",lat:28.6239,lng:77.219,availableSlots:35,totalSlots:120,pricePerHour:{day:40,night:40},rating:4.3,features:["covered","security","cctv"],slotTypes:[{type:"car",available:30,total:100,price:40},{type:"bike",available:5,total:20,price:20}]},"demo-riverfront":{id:"demo-riverfront",name:"Demo Riverfront Parking",address:"Near Riverwalk, City Center",lat:28.6059,lng:77.203,availableSlots:12,totalSlots:60,pricePerHour:{day:30,night:30},rating:4,features:["open-air","lighting"],slotTypes:[{type:"car",available:10,total:50,price:30},{type:"bike",available:2,total:10,price:15}]}},o=a=>"string"===typeof a&&a.startsWith("demo-")}}]);