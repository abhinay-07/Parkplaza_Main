"use strict";(self.webpackChunkparkplaza_frontend=self.webpackChunkparkplaza_frontend||[]).push([[36],{4758:(e,o,r)=>{r.d(o,{A:()=>t});let n=null,a=new Set,i=new Set;function t(e){var o;let{libraries:r=[],retry:t=0,timeoutMs:l=15e3,language:d,region:s,nonce:c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const g=!("undefined"===typeof window||!window.GMAPS_DEBUG),p=function(){for(var e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];g&&console.log("[gmaps-loader]",...o)},m=function(){for(var e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];g&&console.warn("[gmaps-loader]",...o)},u=function(){for(var e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];g&&console.error("[gmaps-loader]",...o)};if(null!==(o=window.google)&&void 0!==o&&o.maps)return null!==r&&void 0!==r&&r.length&&r.forEach(e=>{if(!a.has(e)){"places"!==e||!!window.google.maps.places||m("Already loaded without requested library:",e)}}),Promise.resolve(window.google);if((r||[]).forEach(e=>i.add(e)),n)return n;const w=o=>new Promise((r,n)=>{var t;if(null!==(t=window.google)&&void 0!==t&&t.maps)return p("window.google.maps already present"),r(window.google);let g=document.getElementById("gmaps-sdk");g||(g=document.createElement("script"),g.id="gmaps-sdk",c&&(g.nonce=c),g.async=!0,g.defer=!0,document.head.appendChild(g));let w=!1;"undefined"!==typeof window&&(window.gm_authFailure=()=>{w=!0,u("gm_authFailure: API key or referrer not authorized")}),"undefined"!==typeof window&&(window.__gm_cb=()=>{p("google callback fired (__gm_cb)")},window.__gm_cb2=()=>{p("google callback fired (__gm_cb2)")},window.__gm_cb3=()=>{p("google callback fired (__gm_cb3)")}),g.src=function(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const r=Array.from(i).sort(),n=!("undefined"===typeof window||!window.GMAPS_NO_ASYNC)||o>1,a=!("undefined"===typeof window||!window.GMAPS_USE_CALLBACK)||o>2;return[`https://maps.googleapis.com/maps/api/js?key=${encodeURIComponent(e)}`,"v=weekly",n?null:"loading=async",r.length?`libraries=${encodeURIComponent(r.join(","))}`:null,d?`language=${encodeURIComponent(d)}`:null,s?`region=${encodeURIComponent(s)}`:null,a?`callback=__gm_cb${o>1?o:""}`:null].filter(Boolean).join("&")}(o),p("injecting script",{src:g.src,attempt:o});const f=async()=>{var e;if(null!==(e=window.google)&&void 0!==e&&e.maps)if(w)n(new Error("Google Maps auth failed (gm_authFailure)"));else{try{if(window.google.maps.importLibrary){const e=Array.from(new Set(["maps",...Array.from(i)]));p("importLibrary start",e),await Promise.all(e.map(e=>window.google.maps.importLibrary(e))),p("importLibrary done"),e.forEach(e=>a.add(e))}else i.has("places")&&!window.google.maps.places&&m("places requested but importLibrary unavailable; relying on libraries param")}catch(o){u("importLibrary failed:",(null===o||void 0===o?void 0:o.message)||o)}r(window.google)}else n(new Error("Google Maps loaded but window.google.maps is undefined"))},y=e=>{g.removeEventListener("load",f),g.removeEventListener("error",y),u("script error",e),n(e||new Error("Failed to load Google Maps script"))};g.addEventListener("load",f,{once:!0}),g.addEventListener("error",y,{once:!0});const h=setTimeout(()=>{g.removeEventListener("load",f),g.removeEventListener("error",y),u("timeout",o),n(new Error(`Loading Google Maps timed out (attempt ${o})`))},Math.max(5e3,l)),v=e=>{clearTimeout(h),e&&(g.removeEventListener("load",v),g.removeEventListener("error",v))};g.addEventListener("load",v,{once:!0}),g.addEventListener("error",v,{once:!0})}),f=Math.max(1,1+Number(t||0));return n=(async()=>{if("undefined"!==typeof window&&window.GMAPS_USE_OFFICIAL_LOADER)try{var o;p("trying official @googlemaps/js-api-loader");const r=await import("@googlemaps/js-api-loader").catch(e=>{throw e}),a=(null===r||void 0===r?void 0:r.Loader)||(null===r||void 0===r||null===(o=r.default)||void 0===o?void 0:o.Loader)||(null===r||void 0===r?void 0:r.default);if(a){const o=new a({apiKey:e,version:"weekly",libraries:Array.from(i)});await o.importLibrary("maps");for(const e of i)try{await o.importLibrary(e)}catch(n){m("official loader: failed lib",e,(null===n||void 0===n?void 0:n.message)||n)}return p("official loader done"),window.google}}catch(n){u("official loader failed, falling back",(null===n||void 0===n?void 0:n.message)||n)}let r;for(let e=1;e<=f;e+=1)try{if(e>1){const o=Math.min(2e3*e,6e3);m(`retrying (${e}/${f}) in ${o}ms`),await new Promise(e=>setTimeout(e,o))}return await w(e)}catch(n){r=n,u("load attempt failed:",(null===n||void 0===n?void 0:n.message)||n);const e=document.getElementById("gmaps-sdk");if(e&&e.parentNode)try{e.parentNode.removeChild(e)}catch(a){}}throw r||new Error("Failed to load Google Maps")})(),n}},7036:(e,o,r)=>{r.r(o),r.d(o,{default:()=>l});var n=r(9950),a=r(4758),i=r(4414);const t={lat:28.6139,lng:77.209},l=()=>{const e=(0,n.useRef)(null),[o,r]=(0,n.useState)(null),[l,d]=(0,n.useState)(null),[s,c]=(0,n.useState)([]);(0,n.useEffect)(()=>{let o=!1;return(async()=>{const n="AIzaSyBjZE83cbz9_NMyGZqpajV4kNiuVB-fr0Q";console.log("[ParkingMap] init, apiKey?",!0);try{if(await(0,a.A)(n,{libraries:["places"],retry:2,timeoutMs:15e3}),o||!e.current)return;const i=new window.google.maps.Map(e.current,{center:t,zoom:14,fullscreenControl:!0,streetViewControl:!0,mapTypeControl:!1});r(i),console.log("[ParkingMap] Map created. places?",!!window.google.maps.places);new window.google.maps.places.PlacesService(i).nearbySearch({location:t,radius:2e3,keyword:"parking"},(e,o)=>{console.log("[ParkingMap] nearbySearch status:",o,"results?",Array.isArray(e)?e.length:0),o===window.google.maps.places.PlacesServiceStatus.OK&&Array.isArray(e)&&e.forEach(e=>{var o;if(null===(o=e.geometry)||void 0===o||!o.location)return;new window.google.maps.Marker({position:e.geometry.location,map:i,title:e.name}).addListener("click",()=>{d(e),c([{name:"Car Cleaning",price:200},{name:"Oil Change",price:500},{name:"Repair Service",price:1e3}])})})})}catch(i){e.current&&(e.current.innerHTML='<div style="display:flex;align-items:center;justify-content:center;height:100%;color:#b91c1c;background:#fee2e2;border:1px solid #fecaca;border-radius:8px;">Failed to load Google Maps</div>'),console.error("ParkingMap init error:",i),console.debug("[ParkingMap] diagnostics",{hasGoogle:!!window.google,script:!!document.getElementById("gmaps-sdk")})}})(),()=>{o=!0}},[]);return(0,i.jsxs)("div",{style:{display:"flex",gap:"20px",padding:"20px"},children:[(0,i.jsx)("div",{ref:e,style:{width:"70%",height:"600px",borderRadius:"10px",overflow:"hidden",background:"#e5e7eb"}}),(0,i.jsxs)("div",{style:{width:"30%",background:"#fff",borderRadius:"10px",padding:"15px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",minHeight:"600px"},children:[(0,i.jsx)("h2",{children:"Parking Details"}),l?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h3",{style:{marginTop:8},children:l.name}),(0,i.jsx)("p",{children:l.vicinity}),(0,i.jsx)("p",{children:"Price/hour: \u20b950"}),(0,i.jsx)("p",{children:"Day/Night Parking Available"}),(0,i.jsx)("h4",{style:{marginTop:16},children:"Available Services"}),s.map((e,o)=>(0,i.jsx)("div",{style:{margin:"6px 0"},children:(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox"})," ",e.name," \u2014 \u20b9",e.price]})},o)),(0,i.jsx)("button",{onClick:()=>{l&&alert(`Booking confirmed for ${l.name} with ${s.length} services!`)},style:{marginTop:"12px",background:"#4CAF50",color:"#fff",padding:"10px 15px",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Book Now"})]}):(0,i.jsx)("p",{children:"Click on a parking location to see details."})]})]})}}}]);