"use strict";(self.webpackChunkparkplaza_frontend=self.webpackChunkparkplaza_frontend||[]).push([[611],{4611:(e,s,a)=>{a.r(s),a.d(s,{default:()=>n});var r=a(9950),t=a(8429),l=(a(732),a(4414));const n=()=>{const e=(0,t.zy)(),s=(0,t.Zp)(),{bookingData:a,parkingLot:n}=e.state||{},[d,i]=(0,r.useState)("credit-card"),[o,c]=(0,r.useState)(!1),[m,x]=(0,r.useState)({cardNumber:"",expiryDate:"",cvv:"",holderName:"",upiId:"",walletProvider:"paytm"});if(!a||!n)return(0,l.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,l.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:(0,l.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold text-red-800 mb-2",children:"Invalid Payment Request"}),(0,l.jsx)("p",{className:"text-red-600 mb-4",children:"No booking data found. Please start over."}),(0,l.jsx)("button",{onClick:()=>s("/"),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg",children:"Back to Home"})]})})});const u=e=>{const{name:s,value:a}=e.target;x(e=>({...e,[s]:a}))},h=e=>{const s=new Date(e);return{date:s.toLocaleDateString(),time:s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}},b=h(a.startDateTime),p=h(a.endDateTime),g=Math.ceil((new Date(a.endDateTime)-new Date(a.startDateTime))/36e5);return(0,l.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,l.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsxs)("button",{onClick:()=>s(-1),className:"flex items-center text-blue-600 hover:text-blue-700 mb-4",children:[(0,l.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Complete Payment"}),(0,l.jsx)("p",{className:"text-lg text-gray-600",children:"Secure your parking spot"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,l.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Payment Method"}),(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[{id:"credit-card",label:"Credit/Debit Card",icon:"\ud83d\udcb3"},{id:"upi",label:"UPI",icon:"\ud83d\udcf1"},{id:"wallet",label:"Digital Wallet",icon:"\ud83d\udcb0"}].map(e=>(0,l.jsxs)("button",{onClick:()=>i(e.id),className:"border-2 rounded-lg p-4 text-center transition-colors "+(d===e.id?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 text-gray-700"),children:[(0,l.jsx)("div",{className:"text-2xl mb-2",children:e.icon}),(0,l.jsx)("div",{className:"text-sm font-medium",children:e.label})]},e.id))}),"credit-card"===d&&(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Card Holder Name"}),(0,l.jsx)("input",{type:"text",name:"holderName",value:m.holderName,onChange:u,placeholder:"John Doe",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Card Number"}),(0,l.jsx)("input",{type:"text",name:"cardNumber",value:m.cardNumber,onChange:u,placeholder:"1234 5678 9012 3456",maxLength:"19",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Date"}),(0,l.jsx)("input",{type:"text",name:"expiryDate",value:m.expiryDate,onChange:u,placeholder:"MM/YY",maxLength:"5",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CVV"}),(0,l.jsx)("input",{type:"text",name:"cvv",value:m.cvv,onChange:u,placeholder:"123",maxLength:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),"upi"===d&&(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"UPI ID"}),(0,l.jsx)("input",{type:"text",name:"upiId",value:m.upiId,onChange:u,placeholder:"username@paytm",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),"wallet"===d&&(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Wallet"}),(0,l.jsxs)("select",{name:"walletProvider",value:m.walletProvider,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,l.jsx)("option",{value:"paytm",children:"Paytm"}),(0,l.jsx)("option",{value:"phonepe",children:"PhonePe"}),(0,l.jsx)("option",{value:"gpay",children:"Google Pay"}),(0,l.jsx)("option",{value:"amazon-pay",children:"Amazon Pay"})]})]})]}),(0,l.jsx)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("svg",{className:"w-5 h-5 text-blue-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"Secure Payment"}),(0,l.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:"Your payment information is encrypted and secure. We do not store your card details."})]})]})})]}),(0,l.jsx)("div",{className:"lg:col-span-1",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 sticky top-4",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Order Summary"}),(0,l.jsxs)("div",{className:"mb-4 pb-4 border-b border-gray-200",children:[(0,l.jsx)("h3",{className:"font-medium text-gray-900",children:n.name}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:n.address})]}),(0,l.jsxs)("div",{className:"space-y-3 mb-4 pb-4 border-b border-gray-200",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Slot Type:"}),(0,l.jsx)("span",{className:"font-medium capitalize",children:a.slotType})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Duration:"}),(0,l.jsxs)("span",{className:"font-medium",children:[g," hours"]})]}),(0,l.jsxs)("div",{className:"text-sm",children:[(0,l.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Check-in:"}),(0,l.jsxs)("span",{className:"font-medium",children:[b.date," at ",b.time]})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Check-out:"}),(0,l.jsxs)("span",{className:"font-medium",children:[p.date," at ",p.time]})]})]})]}),a.services&&a.services.length>0&&(0,l.jsxs)("div",{className:"mb-4 pb-4 border-b border-gray-200",children:[(0,l.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Additional Services"}),(0,l.jsx)("div",{className:"space-y-1",children:a.services.map((e,s)=>(0,l.jsxs)("div",{className:"text-sm text-gray-600",children:["Service ",e]},s))})]}),(0,l.jsx)("div",{className:"mb-6",children:(0,l.jsxs)("div",{className:"flex justify-between text-lg font-semibold text-gray-900",children:[(0,l.jsx)("span",{children:"Total Amount:"}),(0,l.jsxs)("span",{children:["\u20b9",a.totalAmount]})]})}),(0,l.jsx)("button",{onClick:async()=>{c(!0);try{if("credit-card"===d){if(!m.holderName||!m.cardNumber||!m.expiryDate||!m.cvv)return alert("Please fill in all card details"),void c(!1)}else if("upi"===d&&!m.upiId)return alert("Please enter your UPI ID"),void c(!1);await new Promise(e=>setTimeout(e,2e3));const e={lotId:n.id,lotName:n.name,address:n.address,startTime:a.startDateTime,endTime:a.endDateTime,slotType:a.slotType,services:a.services||[],totalAmount:a.totalAmount,paymentMethod:d,paymentDetails:"credit-card"===d?{cardLast4:m.cardNumber.slice(-4),cardType:"Credit Card"}:"upi"===d?{upiId:m.upiId}:{wallet:m.walletProvider}};console.log("Payment processed successfully:",{paymentMethod:d,bookingData:e});const r=`PK${Date.now()}`;s("/booking-success",{state:{bookingId:r,bookingData:e,parkingLot:n,paymentMethod:d,paymentStatus:"completed"}})}catch(e){console.error("Payment failed:",e),alert("Payment failed. Please try again.")}finally{c(!1)}},disabled:o,className:"w-full bg-gradient-to-r from-green-600 to-green-700 text-white py-3 px-4 rounded-lg font-medium hover:from-green-700 hover:to-green-800 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center shadow-lg hover:shadow-xl",children:o?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Processing Payment..."]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Pay \u20b9",a.totalAmount," Now"]})}),(0,l.jsxs)("p",{className:"text-xs text-gray-500 mt-3 text-center",children:["By proceeding, you agree to our"," ",(0,l.jsx)("span",{className:"text-blue-600 hover:text-blue-700 cursor-pointer",children:"terms and conditions"})," ","and"," ",(0,l.jsx)("span",{className:"text-blue-600 hover:text-blue-700 cursor-pointer",children:"privacy policy"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-center space-x-4 mt-4 pt-4 border-t border-gray-100",children:[(0,l.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,l.jsx)("svg",{className:"w-4 h-4 text-green-500 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"SSL Secured"]}),(0,l.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,l.jsx)("svg",{className:"w-4 h-4 text-blue-500 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),"PCI Compliant"]})]})]})})]})]})})}}}]);