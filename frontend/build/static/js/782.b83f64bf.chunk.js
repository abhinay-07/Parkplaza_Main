"use strict";(self.webpackChunkparkplaza_frontend=self.webpackChunkparkplaza_frontend||[]).push([[782],{4782:(e,t,s)=>{s.r(t),s.d(t,{default:()=>o});var r=s(9950),a=s(2569),n=s(8429),l=s(2074),i=s(6680),d=s(732),c=s(4414);const o=()=>{const{isAuthenticated:e}=(0,a.d4)(e=>e.auth),t=(0,n.Zp)(),s=(0,n.zy)(),[o,x]=(0,r.useState)("all"),{bookings:m,loading:g,error:h,refetch:u}=(0,i.Wo)(e);(0,r.useEffect)(()=>{if(!e){window.confirm("You need to be logged in to view your bookings. Would you like to login now?")?t("/auth",{state:{from:s}}):t("/")}},[e,t]);const b=()=>alert("Cancellation API not implemented yet"),p=()=>alert("Extension API not implemented yet"),y=e=>{switch(e){case"active":return"bg-green-100 text-green-800 border-green-200";case"confirmed":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":default:return"bg-gray-100 text-gray-800 border-gray-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";case"expired":return"bg-orange-100 text-orange-800 border-orange-200"}},j=e=>{switch(e){case"paid":return"text-green-600";case"pending":return"text-orange-600";case"failed":return"text-red-600";case"refunded":return"text-blue-600";default:return"text-gray-600"}},N=m.filter(e=>"all"===o||e.status===o),f=e=>new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e?g?(0,c.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,c.jsx)(d.A,{})}):(0,c.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,c.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,c.jsxs)("div",{className:"mb-8",children:[(0,c.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"My Bookings"}),(0,c.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage your parking bookings and view history"})]}),(0,c.jsx)("div",{className:"mb-6 border-b border-gray-200",children:(0,c.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{key:"all",label:"All Bookings"},{key:"active",label:"Active"},{key:"confirmed",label:"Confirmed"},{key:"completed",label:"Completed"},{key:"cancelled",label:"Cancelled"}].map(e=>(0,c.jsxs)("button",{onClick:()=>x(e.key),className:"py-2 px-1 border-b-2 font-medium text-sm "+(o===e.key?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e.label,"all"!==e.key&&(0,c.jsx)("span",{className:"ml-2 bg-gray-100 text-gray-600 py-0.5 px-2.5 rounded-full text-xs",children:m.filter(t=>t.status===e.key).length})]},e.key))})}),h&&(0,c.jsxs)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-md p-4",children:[(0,c.jsx)("p",{className:"text-red-600",children:h}),(0,c.jsx)("button",{onClick:u,className:"mt-2 text-red-600 hover:text-red-500 font-medium",children:"Try again"})]}),0===N.length?(0,c.jsxs)("div",{className:"text-center py-12",children:[(0,c.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"\ud83c\udd7f\ufe0f"}),(0,c.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"all"===o?"No bookings yet":`No ${o} bookings`}),(0,c.jsx)("p",{className:"text-gray-500 mb-6",children:"all"===o?"You haven't made any parking bookings yet.":`You don't have any ${o} bookings at the moment.`}),(0,c.jsx)(l.N_,{to:"/",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:"Find Parking"})]}):(0,c.jsx)("div",{className:"space-y-6",children:N.map(e=>(0,c.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:(0,c.jsxs)("div",{className:"p-6",children:[(0,c.jsx)("div",{className:"flex items-start justify-between",children:(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,c.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:e.lotName}),(0,c.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,c.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${y(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),(0,c.jsxs)("span",{className:`text-sm font-medium ${j(e.paymentStatus)}`,children:["Payment: ",e.paymentStatus.charAt(0).toUpperCase()+e.paymentStatus.slice(1)]})]})]}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-sm text-gray-500",children:"Location"}),(0,c.jsx)("p",{className:"text-sm text-gray-900",children:e.address})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-sm text-gray-500",children:"Slot"}),(0,c.jsxs)("p",{className:"text-sm text-gray-900",children:[e.slotType.toUpperCase()," - ",e.slotNumber]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-sm text-gray-500",children:"Start Time"}),(0,c.jsx)("p",{className:"text-sm text-gray-900",children:f(e.startTime)})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-sm text-gray-500",children:"End Time"}),(0,c.jsx)("p",{className:"text-sm text-gray-900",children:f(e.endTime)})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-sm text-gray-500",children:"QR Code"}),(0,c.jsx)("p",{className:"text-sm font-mono text-gray-900",children:e.qrCode})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-sm text-gray-500",children:"Total Amount"}),(0,c.jsxs)("p",{className:"text-sm font-semibold text-gray-900",children:["\u20b9",e.totalAmount]})]})]}),e.services&&e.services.length>0&&(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Services"}),(0,c.jsx)("div",{className:"flex flex-wrap gap-2",children:e.services.map(e=>(0,c.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e},e))})]})]})}),(0,c.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[(0,c.jsxs)("div",{className:"flex space-x-4",children:["confirmed"===e.status&&(0,c.jsx)("button",{onClick:b,className:"text-sm text-red-600 hover:text-red-500 font-medium",children:"Cancel Booking"}),"active"===e.status&&(0,c.jsx)("button",{onClick:p,className:"text-sm text-blue-600 hover:text-blue-500 font-medium",children:"Extend (2 hours)"}),(0,c.jsx)(l.N_,{to:`/parking/${e.lotId}`,className:"text-sm text-indigo-600 hover:text-indigo-500 font-medium",children:"View Parking Lot"})]}),(0,c.jsxs)("p",{className:"text-xs text-gray-500",children:["Booked on ",f(e.createdAt)]})]})]})},e.id))})]})}):(0,c.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,c.jsxs)("div",{className:"max-w-md mx-auto text-center",children:[(0,c.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Login Required"}),(0,c.jsx)("p",{className:"text-gray-600 mb-6",children:"You need to be logged in to view your bookings."}),(0,c.jsx)(l.N_,{to:"/auth",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:"Go to Login"})]})})}}}]);